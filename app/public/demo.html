<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>VeiledChests — UI Demo</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />
<style>
/* ====== RESET ====== */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --background:#030711;
  --foreground:#e2e8f0;
  --gold:#f5a623;
  --gold-light:#fcd34d;
  --gold-dim:#92702a;
  --purple:#8b5cf6;
  --purple-light:#a78bfa;
  --purple-deep:#4c1d95;
  --purple-glow:rgba(139,92,246,0.4);
  --emerald:#10b981;
  --emerald-light:#34d399;
  --red:#ef4444;
  --red-light:#f87171;
  --cyan:#22d3ee;
  --surface:rgba(15,23,42,0.85);
  --surface-border:rgba(148,163,184,0.1);
}

body{
  background:var(--background);
  color:var(--foreground);
  font-family:'Inter',system-ui,-apple-system,sans-serif;
  overflow-x:hidden;
  min-height:100vh;
}

/* ====== ANIMATIONS ====== */
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-12px)}}
@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
@keyframes fade-in{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fade-in-scale{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}
@keyframes spin-slow{from{transform:rotate(0)}to{transform:rotate(360deg)}}
@keyframes dash{0%{stroke-dashoffset:283}50%{stroke-dashoffset:75}100%{stroke-dashoffset:283}}
@keyframes particle-rise{0%{transform:translateY(0) translateX(0) scale(1);opacity:.6}100%{transform:translateY(-100vh) translateX(20px) scale(0);opacity:0}}
@keyframes particle-rise-2{0%{transform:translateY(0) translateX(0) scale(1);opacity:.4}100%{transform:translateY(-100vh) translateX(-30px) scale(0);opacity:0}}
@keyframes border-flow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
@keyframes breathe{0%,100%{box-shadow:0 0 20px rgba(139,92,246,.2)}50%{box-shadow:0 0 40px rgba(139,92,246,.4)}}
@keyframes bounce-small{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}

.animate-fade-in{animation:fade-in .6s ease-out forwards}
.animate-fade-in-scale{animation:fade-in-scale .5s ease-out forwards}
.animate-spin-slow{animation:spin-slow 8s linear infinite}

/* ====== GLASS ====== */
.glass{
  background:rgba(15,23,42,.7);
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  border:1px solid rgba(148,163,184,.1);
}
.glass-strong{
  background:rgba(15,23,42,.85);
  backdrop-filter:blur(30px);
  -webkit-backdrop-filter:blur(30px);
  border:1px solid rgba(148,163,184,.15);
}

/* ====== GRADIENT BORDER ANIMATED ====== */
.gradient-border-animated{position:relative}
.gradient-border-animated::before{
  content:'';position:absolute;inset:-1px;border-radius:inherit;padding:1px;
  background:linear-gradient(135deg,var(--purple),var(--gold),var(--cyan),var(--purple));
  background-size:300% 300%;animation:border-flow 4s ease-in-out infinite;
  mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  mask-composite:exclude;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  -webkit-mask-composite:xor;pointer-events:none;
}

/* ====== PARTICLES ====== */
.particle{
  position:absolute;width:3px;height:3px;border-radius:50%;background:var(--gold);
  opacity:0;animation:particle-rise 6s linear infinite;
}
.particle:nth-child(2n){
  background:var(--purple-light);animation:particle-rise-2 8s linear infinite;width:2px;height:2px;
}

/* ====== SHIMMER TEXT ====== */
.shimmer-text{
  background:linear-gradient(90deg,var(--gold-dim) 0%,var(--gold-light) 25%,var(--gold) 50%,var(--gold-light) 75%,var(--gold-dim) 100%);
  background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;animation:shimmer 4s linear infinite;
}

/* ====== PROGRESS RING ====== */
.progress-ring-circle{stroke-dasharray:283;stroke-dashoffset:283;animation:dash 2s ease-in-out infinite;transform-origin:center}

/* ====== SCROLLBAR ====== */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:rgba(139,92,246,.3);border-radius:3px}

/* ====== LAYOUT HELPERS ====== */
.page{min-height:100vh;position:relative;overflow:hidden}
.section{min-height:calc(100vh - 80px);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px 24px}
button{cursor:pointer;border:none;font-family:inherit}
</style>
</head>
<body>
<div class="page" id="app">
  <!-- ── Ambient background ──────────────────────────── -->
  <div style="position:absolute;inset:0;pointer-events:none" aria-hidden="true">
    <div style="position:absolute;top:-192px;left:-192px;width:600px;height:600px;border-radius:50%;opacity:.2;filter:blur(120px);background:radial-gradient(circle,var(--purple) 0%,transparent 70%)"></div>
    <div style="position:absolute;bottom:-128px;right:-128px;width:500px;height:500px;border-radius:50%;opacity:.15;filter:blur(100px);background:radial-gradient(circle,var(--gold) 0%,transparent 70%)"></div>
    <div style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:800px;height:800px;border-radius:50%;opacity:.07;filter:blur(140px);background:radial-gradient(circle,var(--cyan) 0%,transparent 70%)"></div>
  </div>

  <!-- Background image (masked) -->
  <div id="bgImage" style="position:absolute;inset:0;background-size:cover;background-position:center;background-repeat:no-repeat;transition:opacity .7s;opacity:.3;background-image:url('bg.png');
    -webkit-mask-image:radial-gradient(ellipse 80% 80% at 50% 50%,black 20%,transparent 70%);
    mask-image:radial-gradient(ellipse 80% 80% at 50% 50%,black 20%,transparent 70%)"></div>

  <!-- Particles -->
  <div id="particles" style="position:absolute;inset:0;overflow:hidden;pointer-events:none" aria-hidden="true"></div>

  <!-- ── Header ──────────────────────────────────────── -->
  <header style="position:relative;z-index:20;padding:20px 24px 0">
    <div class="glass" style="max-width:1152px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:12px 24px;border-radius:16px">
      <!-- Logo -->
      <div style="display:flex;align-items:center;gap:10px">
        <div style="width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--purple),var(--gold))">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="2" y="10" width="20" height="12" rx="2" stroke="white" stroke-width="2"/><path d="M12 2L2 10h20L12 2z" stroke="white" stroke-width="2" stroke-linejoin="round"/><circle cx="12" cy="16" r="2" fill="white"/></svg>
        </div>
        <span style="font-size:18px;font-weight:700;color:#fff;letter-spacing:-.3px">VeiledChests</span>
      </div>
      <!-- Nav -->
      <nav style="display:flex;gap:32px;font-size:14px;color:#94a3b8">
        <button onclick="show('hero')" style="background:none;color:inherit;transition:color .2s" onmouseenter="this.style.color='#fff'" onmouseleave="this.style.color='#94a3b8'">Home</button>
        <button onclick="show('stake')" style="background:none;color:inherit;transition:color .2s" onmouseenter="this.style.color='#fff'" onmouseleave="this.style.color='#94a3b8'">Play</button>
        <button onclick="show('loading')" style="background:none;color:inherit;transition:color .2s" onmouseenter="this.style.color='#fff'" onmouseleave="this.style.color='#94a3b8'">Loading</button>
        <button onclick="show('win')" style="background:none;color:inherit;transition:color .2s" onmouseenter="this.style.color='#fff'" onmouseleave="this.style.color='#94a3b8'">Win</button>
        <button onclick="show('lose')" style="background:none;color:inherit;transition:color .2s" onmouseenter="this.style.color='#fff'" onmouseleave="this.style.color='#94a3b8'">Lose</button>
      </nav>
      <!-- Wallet mock -->
      <div style="display:flex;align-items:center;gap:12px">
        <div style="display:flex;align-items:center;gap:8px;padding:6px 12px;border-radius:12px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1)">
          <div style="width:8px;height:8px;border-radius:50%;background:#34d399;animation:breathe 2s ease-in-out infinite"></div>
          <span style="font-size:14px;font-weight:500;color:#cbd5e1">4.20 <span style="color:#64748b">SOL</span></span>
        </div>
        <button style="background:rgba(139,92,246,.15);border:1px solid rgba(139,92,246,.4);border-radius:12px;font-size:14px;height:40px;padding:0 16px;color:var(--purple-light);transition:all .2s" onmouseenter="this.style.background='rgba(139,92,246,.25)'" onmouseleave="this.style.background='rgba(139,92,246,.15)'">
          Bqr3...x9fK
        </button>
      </div>
    </div>
  </header>

  <!-- ═══════ HERO ═══════ -->
  <section id="screen-hero" class="section" style="position:relative;z-index:10">
    <div class="animate-fade-in" style="text-align:center;max-width:768px">
      <!-- Chip -->
      <div style="display:inline-flex;align-items:center;gap:8px;padding:6px 16px;border-radius:9999px;margin-bottom:32px;font-size:14px;font-weight:500;color:#c4b5fd;background:rgba(139,92,246,.1);border:1px solid rgba(139,92,246,.2)">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        Powered by Arcium MPC
      </div>
      <!-- Title -->
      <h1 style="font-size:clamp(40px,7vw,72px);font-weight:800;letter-spacing:-.03em;color:#fff;line-height:1.1;margin-bottom:24px">
        Choose a Chest.<br><span class="shimmer-text">Trust the Veil.</span>
      </h1>
      <!-- Subtitle -->
      <p style="font-size:18px;color:#94a3b8;max-width:540px;margin:0 auto 48px;line-height:1.7">
        A provably fair on-chain game. Your choice and the winning chest are encrypted inside an MPC network — nobody can cheat, not even us.
      </p>
      <!-- CTAs -->
      <div style="display:flex;align-items:center;justify-content:center;gap:16px;flex-wrap:wrap">
        <button onclick="show('stake')" style="position:relative;padding:16px 40px;border-radius:16px;font-size:18px;font-weight:700;color:#fff;background:linear-gradient(135deg,var(--purple-deep),var(--purple));box-shadow:0 0 40px rgba(139,92,246,.3),inset 0 1px 0 rgba(255,255,255,.1);transition:transform .2s" onmouseenter="this.style.transform='scale(1.03)'" onmouseleave="this.style.transform='scale(1)'">
          Play Now →
        </button>
        <button style="padding:16px 24px;border-radius:16px;font-size:14px;font-weight:500;color:#94a3b8;background:transparent;border:1px solid rgba(255,255,255,.1);transition:all .2s" onmouseenter="this.style.color='#fff';this.style.borderColor='rgba(255,255,255,.2)'" onmouseleave="this.style.color='#94a3b8';this.style.borderColor='rgba(255,255,255,.1)'">
          How does it work?
        </button>
      </div>
      <!-- Stats -->
      <div style="display:flex;align-items:center;justify-content:center;gap:40px;margin-top:64px;text-align:center">
        <div><div style="font-size:24px;font-weight:700;color:#fff">5x</div><div style="font-size:12px;color:#64748b;margin-top:4px">Max Multiplier</div></div>
        <div style="width:1px;height:32px;background:rgba(255,255,255,.1)"></div>
        <div><div style="font-size:24px;font-weight:700;color:#fff">MPC</div><div style="font-size:12px;color:#64748b;margin-top:4px">Encrypted Fairness</div></div>
        <div style="width:1px;height:32px;background:rgba(255,255,255,.1)"></div>
        <div><div style="font-size:24px;font-weight:700;color:#fff">Solana</div><div style="font-size:12px;color:#64748b;margin-top:4px">On-chain Settlement</div></div>
      </div>
    </div>
    <!-- Scroll hint -->
    <div style="position:absolute;bottom:32px;left:50%;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center;gap:6px;color:#475569">
      <div style="width:20px;height:32px;border-radius:9999px;border:2px solid #475569;display:flex;align-items:flex-start;justify-content:center;padding-top:6px">
        <div style="width:4px;height:8px;border-radius:9999px;background:#64748b;animation:bounce-small 1.5s ease-in-out infinite"></div>
      </div>
    </div>
  </section>

  <!-- ═══════ STAKE ═══════ -->
  <section id="screen-stake" class="section" style="display:none;position:relative;z-index:10">
    <div class="animate-fade-in" style="width:100%;max-width:480px">
      <div class="glass-strong gradient-border-animated" style="border-radius:24px;padding:40px">
        <!-- Step -->
        <div style="display:flex;align-items:center;gap:12px;margin-bottom:32px">
          <div style="width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;background:var(--purple);color:#fff">1</div>
          <div style="font-size:14px;color:#94a3b8">Configure your bet</div>
        </div>
        <h2 style="font-size:28px;font-weight:700;color:#fff;margin-bottom:4px">Place Your Stake</h2>
        <p style="font-size:14px;color:#64748b;margin-bottom:32px">Pick how much to wager and how many chests to play with.</p>

        <!-- Bet -->
        <div style="margin-bottom:32px">
          <label style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1.5px;color:#64748b;display:block;margin-bottom:12px">Wager Amount</label>
          <div id="bet-grid" style="display:grid;grid-template-columns:repeat(5,1fr);gap:8px"></div>
        </div>

        <!-- Chests -->
        <div style="margin-bottom:32px">
          <label style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1.5px;color:#64748b;display:block;margin-bottom:12px">Number of Chests</label>
          <div id="chest-grid" style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px"></div>
        </div>

        <!-- Summary -->
        <div style="border-radius:16px;padding:16px;margin-bottom:32px;display:flex;align-items:center;justify-content:space-between;background:rgba(245,166,35,.05);border:1px solid rgba(245,166,35,.12)">
          <div>
            <div style="font-size:12px;color:#64748b;margin-bottom:2px">Potential Payout</div>
            <div id="payout-display" style="font-size:20px;font-weight:700;color:#fff">0.3 SOL</div>
          </div>
          <span id="multiplier-badge" style="display:inline-flex;align-items:center;gap:4px;padding:4px 12px;border-radius:9999px;font-size:14px;font-weight:600;background:rgba(245,166,35,.12);color:var(--gold-light);border:1px solid rgba(245,166,35,.25)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round"/></svg>
            3x
          </span>
        </div>

        <!-- Next -->
        <button onclick="show('select')" style="width:100%;padding:16px;border-radius:16px;font-size:16px;font-weight:700;color:#fff;background:linear-gradient(135deg,var(--purple-deep),var(--purple));box-shadow:0 0 30px rgba(139,92,246,.25);transition:transform .15s" onmouseenter="this.style.transform='scale(1.02)'" onmouseleave="this.style.transform='scale(1)'">Choose Your Chest</button>
        <button onclick="show('hero')" style="width:100%;margin-top:12px;padding:8px;font-size:14px;color:#64748b;background:transparent;transition:color .2s" onmouseenter="this.style.color='#cbd5e1'" onmouseleave="this.style.color='#64748b'">Back</button>
      </div>
    </div>
  </section>

  <!-- ═══════ SELECT ═══════ -->
  <section id="screen-select" class="section" style="display:none;position:relative;z-index:10">
    <div class="animate-fade-in" style="width:100%;max-width:768px">
      <!-- Step indicator -->
      <div style="display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:24px">
        <div style="width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;background:var(--gold);color:#1a1a2e">2</div>
        <div style="font-size:14px;color:#94a3b8">
          Betting <span style="color:#fff;font-weight:600" id="select-bet-display">0.1 SOL</span> on
          <span style="color:#fff;font-weight:600" id="select-chest-display">3 chests</span>
          <span style="margin:0 8px;color:#475569">|</span>
          <span id="select-mult-badge" style="display:inline-flex;align-items:center;gap:4px;padding:4px 12px;border-radius:9999px;font-size:14px;font-weight:600;background:rgba(245,166,35,.12);color:var(--gold-light);border:1px solid rgba(245,166,35,.25)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round"/></svg>
            3x
          </span>
        </div>
      </div>

      <h2 style="font-size:clamp(28px,4vw,36px);font-weight:700;color:#fff;text-align:center;margin-bottom:8px">Pick Your Chest</h2>
      <p style="font-size:14px;color:#64748b;text-align:center;margin-bottom:40px">Choose wisely — your selection is encrypted before being sent on-chain.</p>

      <!-- Chests -->
      <div id="chest-select-grid" style="display:grid;gap:16px;margin-bottom:40px;justify-items:center"></div>

      <!-- Confirm -->
      <div style="display:flex;flex-direction:column;align-items:center">
        <button id="confirm-btn" onclick="show('loading')" style="padding:16px 48px;border-radius:16px;font-size:16px;font-weight:700;color:#fff;background:rgba(255,255,255,.05);opacity:.3;cursor:not-allowed;transition:all .2s" disabled>Select a Chest</button>
        <button onclick="show('stake')" style="margin-top:16px;font-size:14px;color:#64748b;background:transparent;display:flex;align-items:center;gap:4px;transition:color .2s" onmouseenter="this.style.color='#cbd5e1'" onmouseleave="this.style.color='#64748b'">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Back to stake
        </button>
      </div>
    </div>
  </section>

  <!-- ═══════ LOADING (MPC COMPUTING) ═══════ -->
  <section id="screen-loading" class="section" style="display:none;position:relative;z-index:10">
    <div class="animate-fade-in" style="width:100%;max-width:768px">
      <div style="display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:24px">
        <div style="width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;background:var(--gold);color:#1a1a2e">2</div>
        <div style="font-size:14px;color:#94a3b8">Betting <span style="color:#fff;font-weight:600">0.1 SOL</span> on <span style="color:#fff;font-weight:600">3 chests</span></div>
      </div>
      <h2 style="font-size:clamp(28px,4vw,36px);font-weight:700;color:#fff;text-align:center;margin-bottom:8px">Pick Your Chest</h2>
      <p style="font-size:14px;color:#64748b;text-align:center;margin-bottom:40px">Choose wisely — your selection is encrypted before being sent on-chain.</p>

      <!-- Spinner -->
      <div style="display:flex;flex-direction:column;align-items:center;gap:24px;padding:64px 0">
        <div style="position:relative;width:112px;height:112px">
          <svg class="animate-spin-slow" style="width:112px;height:112px" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="45" fill="none" stroke="url(#ringGrad)" stroke-width="2" stroke-dasharray="8 12" opacity=".5"/>
            <defs><linearGradient id="ringGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="var(--purple)"/><stop offset="100%" stop-color="var(--gold)"/></linearGradient></defs>
          </svg>
          <svg style="position:absolute;inset:0;width:112px;height:112px;transform:rotate(-90deg)" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="38" fill="none" stroke="var(--purple)" stroke-width="3" stroke-linecap="round" class="progress-ring-circle"/>
          </svg>
          <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center">
            <div style="width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(139,92,246,.15)">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--purple-light)" stroke-width="2"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" stroke-linecap="round"/></svg>
            </div>
          </div>
        </div>
        <div style="text-align:center">
          <p style="color:#c4b5fd;font-weight:500;font-size:18px">Revealing the truth...</p>
          <p style="color:#64748b;font-size:14px;margin-top:4px">Arcium MPC network is processing</p>
        </div>
        <p style="color:#475569;font-size:14px;max-width:400px;text-align:center;margin-top:8px">
          Your encrypted choice is being compared with the winning chest inside a secure MPC computation. This may take a moment.
        </p>
        <!-- Auto-advance for demo -->
        <button onclick="show(Math.random()>.4?'win':'lose')" style="margin-top:16px;padding:10px 24px;border-radius:12px;font-size:13px;color:#94a3b8;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);transition:all .2s" onmouseenter="this.style.color='#fff'" onmouseleave="this.style.color='#94a3b8'">
          ⏩ Skip to result (demo only)
        </button>
      </div>
    </div>
  </section>

  <!-- ═══════ RESULT: WIN ═══════ -->
  <section id="screen-win" class="section" style="display:none;position:relative;z-index:10">
    <!-- Win glow -->
    <div style="position:absolute;top:25%;left:50%;transform:translateX(-50%);width:500px;height:500px;border-radius:50%;pointer-events:none;opacity:.2;filter:blur(100px);background:var(--emerald)"></div>
    <div class="animate-fade-in-scale" style="width:100%;max-width:480px">
      <div class="glass-strong gradient-border-animated" style="border-radius:24px;padding:40px;text-align:center;overflow:hidden;position:relative">
        <!-- Top accent -->
        <div style="position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,transparent,var(--emerald),transparent)"></div>
        <!-- Icon -->
        <div style="width:80px;height:80px;border-radius:50%;margin:0 auto 24px;display:flex;align-items:center;justify-content:center;background:rgba(16,185,129,.12);border:2px solid rgba(16,185,129,.3)">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="var(--emerald)" stroke-width="2"><path d="M8 12.5l3 3 5-6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="10"/></svg>
        </div>
        <h2 style="font-size:36px;font-weight:800;color:var(--emerald-light);margin-bottom:8px">You Won!</h2>
        <div style="font-size:32px;font-weight:700;color:var(--emerald);margin-bottom:24px">+0.30 SOL</div>

        <!-- Details -->
        <div style="border-radius:16px;padding:20px;margin-bottom:24px;text-align:left;background:rgba(255,255,255,.03);border:1px solid rgba(148,163,184,.08)">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
            <span style="font-size:14px;color:#64748b">Winning Chest</span>
            <span style="font-size:14px;font-weight:700;color:var(--gold)">#2</span>
          </div>
          <div style="height:1px;background:rgba(255,255,255,.05);margin-bottom:12px"></div>
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
            <span style="font-size:14px;color:#64748b">Your Choice</span>
            <span style="font-size:14px;font-weight:700;color:#fff">#2</span>
          </div>
          <div style="height:1px;background:rgba(255,255,255,.05);margin-bottom:12px"></div>
          <div style="display:flex;align-items:center;justify-content:space-between">
            <span style="font-size:14px;color:#64748b">Multiplier</span>
            <span style="display:inline-flex;align-items:center;gap:4px;padding:4px 12px;border-radius:9999px;font-size:14px;font-weight:600;background:rgba(245,166,35,.12);color:var(--gold-light);border:1px solid rgba(245,166,35,.25)">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round"/></svg>
              3x
            </span>
          </div>
        </div>

        <p style="font-size:12px;color:#475569;font-family:monospace;margin-bottom:24px;word-break:break-all">4sGjMW84sPCz7Q9nJ8...kx2e7vFp</p>

        <div style="display:flex;gap:12px">
          <button onclick="show('stake')" style="flex:1;padding:16px;border-radius:16px;font-size:16px;font-weight:700;color:#fff;background:linear-gradient(135deg,var(--purple-deep),var(--purple));box-shadow:0 0 30px rgba(139,92,246,.25);transition:transform .15s" onmouseenter="this.style.transform='scale(1.02)'" onmouseleave="this.style.transform='scale(1)'">Play Again</button>
          <button onclick="show('hero')" style="padding:16px 24px;border-radius:16px;font-size:14px;font-weight:500;color:#94a3b8;background:transparent;border:1px solid rgba(255,255,255,.1);transition:all .2s" onmouseenter="this.style.color='#fff';this.style.borderColor='rgba(255,255,255,.2)'" onmouseleave="this.style.color='#94a3b8';this.style.borderColor='rgba(255,255,255,.1)'">Home</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ═══════ RESULT: LOSE ═══════ -->
  <section id="screen-lose" class="section" style="display:none;position:relative;z-index:10">
    <div class="animate-fade-in-scale" style="width:100%;max-width:480px">
      <div class="glass-strong gradient-border-animated" style="border-radius:24px;padding:40px;text-align:center;overflow:hidden;position:relative">
        <!-- Top accent -->
        <div style="position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,transparent,var(--red),transparent)"></div>
        <!-- Icon -->
        <div style="width:80px;height:80px;border-radius:50%;margin:0 auto 24px;display:flex;align-items:center;justify-content:center;background:rgba(239,68,68,.12);border:2px solid rgba(239,68,68,.3)">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="var(--red)" stroke-width="2"><path d="M15 9l-6 6M9 9l6 6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="10"/></svg>
        </div>
        <h2 style="font-size:36px;font-weight:800;color:var(--red-light);margin-bottom:8px">You Lost</h2>
        <div style="font-size:32px;font-weight:700;color:var(--red);margin-bottom:24px">-0.10 SOL</div>

        <!-- Details -->
        <div style="border-radius:16px;padding:20px;margin-bottom:24px;text-align:left;background:rgba(255,255,255,.03);border:1px solid rgba(148,163,184,.08)">
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
            <span style="font-size:14px;color:#64748b">Winning Chest</span>
            <span style="font-size:14px;font-weight:700;color:var(--gold)">#3</span>
          </div>
          <div style="height:1px;background:rgba(255,255,255,.05);margin-bottom:12px"></div>
          <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
            <span style="font-size:14px;color:#64748b">Your Choice</span>
            <span style="font-size:14px;font-weight:700;color:#fff">#1</span>
          </div>
          <div style="height:1px;background:rgba(255,255,255,.05);margin-bottom:12px"></div>
          <div style="display:flex;align-items:center;justify-content:space-between">
            <span style="font-size:14px;color:#64748b">Multiplier</span>
            <span style="display:inline-flex;align-items:center;gap:4px;padding:4px 12px;border-radius:9999px;font-size:14px;font-weight:600;background:rgba(245,166,35,.12);color:var(--gold-light);border:1px solid rgba(245,166,35,.25)">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round"/></svg>
              3x
            </span>
          </div>
        </div>

        <p style="font-size:12px;color:#475569;font-family:monospace;margin-bottom:24px;word-break:break-all">7hTkN2qM5b8xR1pVe...nY4wGdLs</p>

        <div style="display:flex;gap:12px">
          <button onclick="show('stake')" style="flex:1;padding:16px;border-radius:16px;font-size:16px;font-weight:700;color:#fff;background:linear-gradient(135deg,var(--purple-deep),var(--purple));box-shadow:0 0 30px rgba(139,92,246,.25);transition:transform .15s" onmouseenter="this.style.transform='scale(1.02)'" onmouseleave="this.style.transform='scale(1)'">Play Again</button>
          <button onclick="show('hero')" style="padding:16px 24px;border-radius:16px;font-size:14px;font-weight:500;color:#94a3b8;background:transparent;border:1px solid rgba(255,255,255,.1);transition:all .2s" onmouseenter="this.style.color='#fff';this.style.borderColor='rgba(255,255,255,.2)'" onmouseleave="this.style.color='#94a3b8';this.style.borderColor='rgba(255,255,255,.1)'">Home</button>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
// ─── State ───────────────────────────────────────────
let currentBet = 0.1;
let currentChests = 3;
let selectedChest = null;
const BET_OPTIONS = [0.1, 0.3, 0.5, 0.7, 1.0];
const CHEST_OPTIONS = [2, 3, 4, 5];

// ─── Screen switching ────────────────────────────────
const screens = ['hero','stake','select','loading','win','lose'];
function show(id) {
  screens.forEach(s => {
    const el = document.getElementById('screen-' + s);
    if (el) el.style.display = 'none';
  });
  const target = document.getElementById('screen-' + id);
  if (target) target.style.display = 'flex';

  // Swap bg image
  const bg = document.getElementById('bgImage');
  if (bg) bg.style.backgroundImage = (id === 'select' || id === 'loading') ? "url('bg2.png')" : "url('bg.png')";

  // Rebuild dynamic grids when entering those screens
  if (id === 'stake') buildStakeUI();
  if (id === 'select') buildSelectUI();
}

// ─── Particles ───────────────────────────────────────
(function initParticles() {
  const container = document.getElementById('particles');
  for (let i = 0; i < 18; i++) {
    const p = document.createElement('span');
    p.className = 'particle';
    p.style.left = Math.random() * 100 + '%';
    p.style.bottom = '-10px';
    p.style.animationDelay = (Math.random() * 6) + 's';
    p.style.animationDuration = (6 + Math.random() * 6) + 's';
    const size = 2 + Math.random() * 3;
    p.style.width = size + 'px';
    p.style.height = size + 'px';
    container.appendChild(p);
  }
})();

// ─── Stake screen ────────────────────────────────────
function buildStakeUI() {
  // Bet buttons
  const betGrid = document.getElementById('bet-grid');
  betGrid.innerHTML = '';
  BET_OPTIONS.forEach(amount => {
    const btn = document.createElement('button');
    btn.textContent = amount;
    const sub = document.createElement('span');
    sub.textContent = 'SOL';
    sub.style.cssText = 'display:block;font-size:10px;opacity:.6;font-weight:400;margin-top:2px';
    btn.innerHTML = '';
    btn.appendChild(document.createTextNode(amount));
    btn.appendChild(sub);
    btn.style.cssText = 'padding:12px 0;border-radius:12px;text-align:center;font-weight:600;font-size:15px;transition:all .15s;cursor:pointer;font-family:inherit;border:none';
    styleBetBtn(btn, amount === currentBet);
    btn.onclick = () => { currentBet = amount; buildStakeUI(); };
    btn.onmouseenter = () => { if (amount !== currentBet) btn.style.transform = 'scale(1.04)'; };
    btn.onmouseleave = () => { btn.style.transform = 'scale(1)'; };
    betGrid.appendChild(btn);
  });

  // Chest buttons
  const chestGrid = document.getElementById('chest-grid');
  chestGrid.innerHTML = '';
  CHEST_OPTIONS.forEach(num => {
    const btn = document.createElement('button');
    const sub = document.createElement('span');
    sub.textContent = 'chests';
    sub.style.cssText = 'display:block;font-size:10px;opacity:.6;font-weight:400;margin-top:2px';
    btn.innerHTML = '';
    btn.appendChild(document.createTextNode(num));
    btn.appendChild(sub);
    btn.style.cssText = 'padding:12px 0;border-radius:12px;text-align:center;font-weight:600;font-size:15px;transition:all .15s;cursor:pointer;font-family:inherit;border:none';
    styleChestBtn(btn, num === currentChests);
    btn.onclick = () => { currentChests = num; selectedChest = null; buildStakeUI(); };
    btn.onmouseenter = () => { if (num !== currentChests) btn.style.transform = 'scale(1.04)'; };
    btn.onmouseleave = () => { btn.style.transform = 'scale(1)'; };
    chestGrid.appendChild(btn);
  });

  // Update summary
  document.getElementById('payout-display').textContent = (currentBet * currentChests).toFixed(1) + ' SOL';
  document.getElementById('multiplier-badge').innerHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round"/></svg>${currentChests}x`;
}

function styleBetBtn(btn, active) {
  if (active) {
    btn.style.background = 'linear-gradient(135deg, var(--purple-deep), var(--purple))';
    btn.style.color = '#fff';
    btn.style.border = '1px solid var(--purple)';
    btn.style.boxShadow = '0 0 20px rgba(139,92,246,.25)';
  } else {
    btn.style.background = 'rgba(255,255,255,.04)';
    btn.style.color = 'var(--purple-light)';
    btn.style.border = '1px solid rgba(148,163,184,.1)';
    btn.style.boxShadow = 'none';
  }
}
function styleChestBtn(btn, active) { styleBetBtn(btn, active); }

// ─── Select screen ───────────────────────────────────
function buildSelectUI() {
  selectedChest = null;
  document.getElementById('select-bet-display').textContent = currentBet + ' SOL';
  document.getElementById('select-chest-display').textContent = currentChests + ' chests';
  document.getElementById('select-mult-badge').innerHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round"/></svg>${currentChests}x`;

  const grid = document.getElementById('chest-select-grid');
  grid.style.gridTemplateColumns = `repeat(${Math.min(currentChests, 5)}, minmax(0, 1fr))`;
  grid.innerHTML = '';

  for (let i = 0; i < currentChests; i++) {
    const btn = document.createElement('button');
    btn.style.cssText = 'position:relative;display:flex;flex-direction:column;align-items:center;background:none;border:none;cursor:pointer;transition:transform .3s;padding:0';
    btn.innerHTML = `
      <div class="glow-ring" style="position:absolute;top:16px;width:128px;height:128px;border-radius:50%;transition:all .3s;background:radial-gradient(circle,rgba(139,92,246,.08) 0%,transparent 70%);transform:scale(1)"></div>
      <div class="chest-card" style="position:relative;z-index:1;width:160px;aspect-ratio:1;border-radius:16px;display:flex;align-items:center;justify-content:center;transition:all .3s;background:rgba(255,255,255,.03);border:1px solid rgba(148,163,184,.08);box-shadow:0 4px 16px rgba(0,0,0,.2)">
        <img src="chest.png" alt="Chest ${i+1}" style="width:112px;height:112px;object-fit:contain;transition:all .3s;filter:drop-shadow(0 0 8px rgba(245,166,35,.15));transform:scale(1)"/>
      </div>
      <div class="chest-label" style="margin-top:12px;padding:6px 16px;border-radius:9999px;font-size:14px;font-weight:700;transition:all .3s;background:rgba(255,255,255,.06);color:var(--purple-light)">#${i+1}</div>
    `;
    const idx = i;
    btn.onclick = () => selectChest(idx, grid);
    btn.onmouseenter = () => { if (selectedChest !== idx) btn.style.transform = 'translateY(-4px)'; };
    btn.onmouseleave = () => { if (selectedChest !== idx) btn.style.transform = 'translateY(0)'; };
    grid.appendChild(btn);
  }
  updateConfirmBtn();
}

function selectChest(idx, grid) {
  selectedChest = idx;
  const buttons = grid.children;
  for (let i = 0; i < buttons.length; i++) {
    const btn = buttons[i];
    const isSelected = i === idx;
    btn.style.transform = isSelected ? 'translateY(-8px)' : 'translateY(0)';
    const glow = btn.querySelector('.glow-ring');
    const card = btn.querySelector('.chest-card');
    const img = btn.querySelector('img');
    const label = btn.querySelector('.chest-label');
    if (isSelected) {
      glow.style.background = 'radial-gradient(circle,rgba(245,166,35,.25) 0%,transparent 70%)';
      glow.style.transform = 'scale(1.3)';
      card.style.background = 'linear-gradient(180deg,rgba(245,166,35,.12) 0%,rgba(245,166,35,.04) 100%)';
      card.style.border = '2px solid rgba(245,166,35,.5)';
      card.style.boxShadow = '0 0 30px rgba(245,166,35,.2),0 8px 32px rgba(0,0,0,.3)';
      img.style.filter = 'drop-shadow(0 0 20px rgba(245,166,35,.6))';
      img.style.transform = 'scale(1.08)';
      label.style.background = 'var(--gold)';
      label.style.color = '#1a1a2e';
      label.style.boxShadow = '0 0 15px rgba(245,166,35,.3)';
    } else {
      glow.style.background = 'radial-gradient(circle,rgba(139,92,246,.08) 0%,transparent 70%)';
      glow.style.transform = 'scale(1)';
      card.style.background = 'rgba(255,255,255,.03)';
      card.style.border = '1px solid rgba(148,163,184,.08)';
      card.style.boxShadow = '0 4px 16px rgba(0,0,0,.2)';
      img.style.filter = 'drop-shadow(0 0 8px rgba(245,166,35,.15))';
      img.style.transform = 'scale(1)';
      label.style.background = 'rgba(255,255,255,.06)';
      label.style.color = 'var(--purple-light)';
      label.style.boxShadow = 'none';
    }
  }
  updateConfirmBtn();
}

function updateConfirmBtn() {
  const btn = document.getElementById('confirm-btn');
  if (selectedChest !== null) {
    btn.disabled = false;
    btn.style.opacity = '1';
    btn.style.cursor = 'pointer';
    btn.style.background = 'linear-gradient(135deg,var(--purple-deep),var(--purple))';
    btn.style.boxShadow = '0 0 30px rgba(139,92,246,.3)';
    btn.textContent = 'Confirm Chest #' + (selectedChest + 1);
    btn.onmouseenter = () => { btn.style.transform = 'scale(1.03)'; };
    btn.onmouseleave = () => { btn.style.transform = 'scale(1)'; };
  } else {
    btn.disabled = true;
    btn.style.opacity = '.3';
    btn.style.cursor = 'not-allowed';
    btn.style.background = 'rgba(255,255,255,.05)';
    btn.style.boxShadow = 'none';
    btn.textContent = 'Select a Chest';
    btn.onmouseenter = null;
    btn.onmouseleave = null;
  }
}

// Init first screen
buildStakeUI();
</script>
</body>
</html>
