<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>VeiledChests — UI Demo</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --background:#030711;
  --gold:#f5a623;
  --gold-light:#fcd34d;
  --gold-dim:#92702a;
  --purple:#8b5cf6;
  --purple-light:#a78bfa;
  --purple-deep:#4c1d95;
  --emerald:#10b981;
  --emerald-light:#34d399;
  --red:#ef4444;
  --red-light:#f87171;
  --cyan:#22d3ee;
}

body{
  background:var(--background);
  color:#e2e8f0;
  font-family:'Inter',system-ui,sans-serif;
  overflow-x:hidden;
  min-height:100vh;
}

button{cursor:pointer;border:none;font-family:inherit;background:none}

/* ── Animations ─────────────────────────────────── */
@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}
@keyframes fade-in{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fade-in-scale{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}
@keyframes spin-slow{from{transform:rotate(0)}to{transform:rotate(360deg)}}
@keyframes dash{0%{stroke-dashoffset:283}50%{stroke-dashoffset:75}100%{stroke-dashoffset:283}}
@keyframes particle-rise{0%{transform:translateY(0) translateX(0) scale(1);opacity:.5}100%{transform:translateY(-100vh) translateX(20px) scale(0);opacity:0}}
@keyframes particle-rise-2{0%{transform:translateY(0) translateX(0) scale(1);opacity:.3}100%{transform:translateY(-100vh) translateX(-30px) scale(0);opacity:0}}
@keyframes border-flow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
@keyframes bounce-dot{0%,100%{transform:translateY(0)}50%{transform:translateY(-4px)}}

.anim-fade-in{animation:fade-in .55s ease-out both}
.anim-fade-scale{animation:fade-in-scale .5s ease-out both}
.anim-spin-slow{animation:spin-slow 8s linear infinite}

/* ── Glass ──────────────────────────────────────── */
.glass{background:rgba(15,23,42,.7);backdrop-filter:blur(20px);border:1px solid rgba(148,163,184,.1)}
.glass-strong{background:rgba(15,23,42,.85);backdrop-filter:blur(30px);border:1px solid rgba(148,163,184,.15)}

/* ── Animated gradient border ───────────────────── */
.grad-border{position:relative}
.grad-border::before{
  content:'';position:absolute;inset:-1px;border-radius:inherit;
  background:linear-gradient(135deg,var(--purple),var(--gold),var(--cyan),var(--purple));
  background-size:300% 300%;animation:border-flow 4s ease-in-out infinite;
  mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  mask-composite:exclude;-webkit-mask:linear-gradient(#fff 0 0) content-box,linear-gradient(#fff 0 0);
  -webkit-mask-composite:xor;pointer-events:none;z-index:0;
}

/* ── Shimmer text ───────────────────────────────── */
.shimmer{
  background:linear-gradient(90deg,var(--gold-dim) 0%,var(--gold-light) 25%,var(--gold) 50%,var(--gold-light) 75%,var(--gold-dim) 100%);
  background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;animation:shimmer 4s linear infinite;
}

/* ── Progress ring ──────────────────────────────── */
.ring-dash{stroke-dasharray:283;stroke-dashoffset:283;animation:dash 2s ease-in-out infinite;transform-origin:center}

/* ── Particle ───────────────────────────────────── */
.particle{position:absolute;border-radius:50%;background:var(--gold);opacity:0;animation:particle-rise 6s linear infinite}
.particle:nth-child(2n){background:var(--purple-light);animation:particle-rise-2 8s linear infinite;width:2px!important;height:2px!important}

/* ── Layout ─────────────────────────────────────── */
.screen{display:none;min-height:calc(100vh - 72px);align-items:center;justify-content:center;padding:48px 24px;position:relative;z-index:10;flex-direction:column}
.screen.active{display:flex}

/* ── Scrollbar ──────────────────────────────────── */
::-webkit-scrollbar{width:5px}
::-webkit-scrollbar-thumb{background:rgba(139,92,246,.3);border-radius:3px}
</style>
</head>
<body>

<!-- Ambient blobs -->
<div style="position:fixed;inset:0;pointer-events:none;z-index:0" aria-hidden>
  <div style="position:absolute;top:-192px;left:-192px;width:600px;height:600px;border-radius:50%;opacity:.18;filter:blur(120px);background:radial-gradient(circle,var(--purple) 0%,transparent 70%)"></div>
  <div style="position:absolute;bottom:-128px;right:-128px;width:500px;height:500px;border-radius:50%;opacity:.13;filter:blur(100px);background:radial-gradient(circle,var(--gold) 0%,transparent 70%)"></div>
</div>

<!-- Background image (masked) -->
<div id="bgImg" style="position:fixed;inset:0;z-index:0;background-size:cover;background-position:center;background-repeat:no-repeat;transition:opacity .7s;opacity:.28;background-image:url('bg.png');
  -webkit-mask-image:radial-gradient(ellipse 80% 80% at 50% 50%,black 15%,transparent 70%);
  mask-image:radial-gradient(ellipse 80% 80% at 50% 50%,black 15%,transparent 70%)"></div>

<!-- Particles -->
<div id="ptcls" style="position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden" aria-hidden></div>

<!-- ── Header ──────────────────────────────────── -->
<header style="position:relative;z-index:20;padding:16px 24px 0">
  <div class="glass" style="max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:10px 20px;border-radius:16px">
    <!-- Logo -->
    <div style="display:flex;align-items:center;gap:10px">
      <div style="width:30px;height:30px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--purple),var(--gold));flex-shrink:0">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><rect x="2" y="10" width="20" height="12" rx="2" stroke="white" stroke-width="2"/><path d="M12 2L2 10h20L12 2z" stroke="white" stroke-width="2" stroke-linejoin="round"/><circle cx="12" cy="16" r="2" fill="white"/></svg>
      </div>
      <span style="font-size:17px;font-weight:700;color:#fff">VeiledChests</span>
    </div>
    <!-- Screen nav (demo only) -->
    <nav style="display:flex;gap:6px">
      <button onclick="show('hero')" id="nav-hero" class="navbtn active-nav">Hero</button>
      <button onclick="show('stake')" id="nav-stake" class="navbtn">Stake</button>
      <button onclick="show('select')" id="nav-select" class="navbtn">Select</button>
      <button onclick="show('loading')" id="nav-loading" class="navbtn">Loading</button>
      <button onclick="show('win')" id="nav-win" class="navbtn">Win</button>
      <button onclick="show('lose')" id="nav-lose" class="navbtn">Lose</button>
    </nav>
    <!-- Wallet mock -->
    <div style="display:flex;align-items:center;gap:10px">
      <div style="display:flex;align-items:center;gap:7px;padding:5px 12px;border-radius:10px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1)">
        <div style="width:7px;height:7px;border-radius:50%;background:#34d399;animation:pulse 2s ease-in-out infinite"></div>
        <span style="font-size:13px;font-weight:500;color:#cbd5e1">4.20 <span style="color:#475569">SOL</span></span>
      </div>
      <button style="background:rgba(139,92,246,.15);border:1px solid rgba(139,92,246,.4);border-radius:10px;font-size:13px;height:36px;padding:0 14px;color:var(--purple-light)">Bqr3…x9fK</button>
    </div>
  </div>
</header>

<style>
.navbtn{padding:5px 12px;border-radius:8px;font-size:12px;font-weight:600;color:#64748b;transition:all .15s}
.navbtn:hover,.navbtn.active-nav{background:rgba(139,92,246,.15);color:var(--purple-light)}
</style>

<!-- ══════════════════════════════════════════════
     HERO
══════════════════════════════════════════════ -->
<section id="screen-hero" class="screen active">
  <div class="anim-fade-in" style="text-align:center;max-width:720px">
    <div style="display:inline-flex;align-items:center;gap:7px;padding:5px 14px;border-radius:9999px;margin-bottom:28px;font-size:13px;font-weight:500;color:#c4b5fd;background:rgba(139,92,246,.1);border:1px solid rgba(139,92,246,.2)">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
      Powered by Arcium MPC
    </div>
    <h1 style="font-size:clamp(38px,6.5vw,68px);font-weight:800;letter-spacing:-.03em;color:#fff;line-height:1.1;margin-bottom:20px">
      Choose a Chest.<br><span class="shimmer">Trust the Veil.</span>
    </h1>
    <p style="font-size:17px;color:#94a3b8;max-width:500px;margin:0 auto 44px;line-height:1.75">
      A provably fair on-chain game. Your choice and the winning chest are encrypted inside an MPC network — nobody can cheat, not even us.
    </p>
    <div style="display:flex;align-items:center;justify-content:center;gap:14px;flex-wrap:wrap">
      <button onclick="show('stake')" style="padding:14px 36px;border-radius:16px;font-size:17px;font-weight:700;color:#fff;background:linear-gradient(135deg,var(--purple-deep),var(--purple));box-shadow:0 0 36px rgba(139,92,246,.3),inset 0 1px 0 rgba(255,255,255,.1);transition:transform .2s" onmouseenter="this.style.transform='scale(1.03)'" onmouseleave="this.style.transform=''">
        Play Now →
      </button>
      <button style="padding:14px 22px;border-radius:16px;font-size:13px;font-weight:500;color:#94a3b8;border:1px solid rgba(255,255,255,.1);transition:all .2s" onmouseenter="this.style.color='#fff';this.style.borderColor='rgba(255,255,255,.2)'" onmouseleave="this.style.color='#94a3b8';this.style.borderColor='rgba(255,255,255,.1)'">
        How does it work?
      </button>
    </div>
    <div style="display:flex;align-items:center;justify-content:center;gap:36px;margin-top:56px;text-align:center">
      <div><div style="font-size:22px;font-weight:700;color:#fff">5x</div><div style="font-size:11px;color:#475569;margin-top:3px">Max Multiplier</div></div>
      <div style="width:1px;height:28px;background:rgba(255,255,255,.1)"></div>
      <div><div style="font-size:22px;font-weight:700;color:#fff">MPC</div><div style="font-size:11px;color:#475569;margin-top:3px">Encrypted Fairness</div></div>
      <div style="width:1px;height:28px;background:rgba(255,255,255,.1)"></div>
      <div><div style="font-size:22px;font-weight:700;color:#fff">Solana</div><div style="font-size:11px;color:#475569;margin-top:3px">On-chain Settlement</div></div>
    </div>
  </div>
  <!-- Scroll hint -->
  <div style="position:absolute;bottom:28px;left:50%;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center">
    <div style="width:18px;height:30px;border-radius:9999px;border:2px solid #334155;display:flex;align-items:flex-start;justify-content:center;padding-top:5px">
      <div style="width:3px;height:7px;border-radius:9999px;background:#475569;animation:bounce-dot 1.5s ease-in-out infinite"></div>
    </div>
  </div>
</section>

<!-- ══════════════════════════════════════════════
     STAKE
══════════════════════════════════════════════ -->
<section id="screen-stake" class="screen">
  <div class="anim-fade-in" style="width:100%;max-width:460px">
    <div class="glass-strong grad-border" style="border-radius:24px;padding:36px 36px 32px">
      <!-- Step -->
      <div style="display:flex;align-items:center;gap:10px;margin-bottom:24px">
        <div style="width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;background:var(--purple);color:#fff;flex-shrink:0">1</div>
        <span style="font-size:13px;color:#64748b">Configure your bet</span>
      </div>
      <h2 style="font-size:26px;font-weight:700;color:#fff;margin-bottom:3px">Place Your Stake</h2>
      <p style="font-size:13px;color:#475569;margin-bottom:28px">Pick how much to wager and how many chests to play with.</p>

      <!-- Wager -->
      <div style="margin-bottom:22px">
        <label style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:#475569;display:block;margin-bottom:10px">Wager Amount</label>
        <div id="bet-grid" style="display:grid;grid-template-columns:repeat(5,1fr);gap:7px"></div>
      </div>

      <!-- Chests -->
      <div style="margin-bottom:22px">
        <label style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:#475569;display:block;margin-bottom:10px">Number of Chests</label>
        <div id="chest-grid" style="display:flex;gap:7px"></div>
      </div>

      <!-- Payout summary -->
      <div style="border-radius:14px;padding:14px 16px;margin-bottom:24px;display:flex;align-items:center;justify-content:space-between;background:rgba(245,166,35,.05);border:1px solid rgba(245,166,35,.12)">
        <div>
          <div style="font-size:11px;color:#475569;margin-bottom:2px">Potential Payout</div>
          <div id="payout-val" style="font-size:20px;font-weight:700;color:#fff">0.3 SOL</div>
        </div>
        <span id="mult-badge" class="mult-badge">⚡ 3x</span>
      </div>

      <button onclick="show('select')" style="width:100%;padding:14px;border-radius:16px;font-size:15px;font-weight:700;color:#fff;background:linear-gradient(135deg,var(--purple-deep),var(--purple));box-shadow:0 0 28px rgba(139,92,246,.25);transition:transform .15s" onmouseenter="this.style.transform='scale(1.02)'" onmouseleave="this.style.transform=''">Choose Your Chest</button>
      <button onclick="show('hero')" style="width:100%;margin-top:10px;padding:7px;font-size:13px;color:#475569;transition:color .2s" onmouseenter="this.style.color='#cbd5e1'" onmouseleave="this.style.color='#475569'">Back</button>
    </div>
  </div>
</section>

<style>
.mult-badge{display:inline-flex;align-items:center;gap:4px;padding:4px 12px;border-radius:9999px;font-size:13px;font-weight:600;background:rgba(245,166,35,.12);color:var(--gold-light);border:1px solid rgba(245,166,35,.25)}
</style>

<!-- ══════════════════════════════════════════════
     SELECT
══════════════════════════════════════════════ -->
<section id="screen-select" class="screen">
  <div class="anim-fade-in" style="width:100%;max-width:780px">
    <!-- Step info -->
    <div style="display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:20px">
      <div style="width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;background:var(--gold);color:#1a1a2e;flex-shrink:0">2</div>
      <div style="font-size:13px;color:#64748b">
        Betting <span style="color:#fff;font-weight:600" id="sel-bet">0.1 SOL</span> on
        <span style="color:#fff;font-weight:600" id="sel-chests">3 chests</span>
        <span style="margin:0 8px;color:#334155">|</span>
        <span id="sel-mult" class="mult-badge">⚡ 3x</span>
      </div>
    </div>
    <h2 style="font-size:clamp(26px,4vw,34px);font-weight:700;color:#fff;text-align:center;margin-bottom:6px">Pick Your Chest</h2>
    <p style="font-size:13px;color:#475569;text-align:center;margin-bottom:36px">Choose wisely — your selection is encrypted before being sent on-chain.</p>

    <div id="chest-select-grid" style="display:grid;gap:14px;margin-bottom:36px;justify-items:center"></div>

    <div style="display:flex;flex-direction:column;align-items:center;gap:14px">
      <button id="confirm-btn" onclick="show('loading')" disabled style="padding:14px 44px;border-radius:16px;font-size:15px;font-weight:700;color:#fff;background:rgba(255,255,255,.05);opacity:.3;cursor:not-allowed;transition:all .2s">Select a Chest</button>
      <button onclick="show('stake')" style="font-size:13px;color:#475569;display:flex;align-items:center;gap:4px;transition:color .2s" onmouseenter="this.style.color='#cbd5e1'" onmouseleave="this.style.color='#475569'">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7" stroke-linecap="round" stroke-linejoin="round"/></svg>
        Back to stake
      </button>
    </div>
  </div>
</section>

<!-- ══════════════════════════════════════════════
     LOADING
══════════════════════════════════════════════ -->
<section id="screen-loading" class="screen">
  <div class="anim-fade-in" style="width:100%;max-width:500px;display:flex;flex-direction:column;align-items:center;gap:24px;padding:40px 0">
    <!-- Spinner -->
    <div style="position:relative;width:112px;height:112px">
      <svg class="anim-spin-slow" style="width:112px;height:112px;position:absolute;inset:0" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" fill="none" stroke="url(#rg)" stroke-width="2" stroke-dasharray="8 12" opacity=".5"/>
        <defs><linearGradient id="rg" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="var(--purple)"/><stop offset="100%" stop-color="var(--gold)"/></linearGradient></defs>
      </svg>
      <svg style="position:absolute;inset:0;width:112px;height:112px;transform:rotate(-90deg)" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="38" fill="none" stroke="var(--purple)" stroke-width="3" stroke-linecap="round" class="ring-dash"/>
      </svg>
      <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center">
        <div style="width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(139,92,246,.15)">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="var(--purple-light)" stroke-width="2"><path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83" stroke-linecap="round"/></svg>
        </div>
      </div>
    </div>
    <div style="text-align:center">
      <p style="color:#c4b5fd;font-weight:500;font-size:18px">Revealing the truth…</p>
      <p style="color:#475569;font-size:13px;margin-top:4px">Arcium MPC network is processing</p>
    </div>
    <p style="color:#334155;font-size:13px;max-width:380px;text-align:center">
      Your encrypted choice is being compared with the winning chest inside a secure MPC computation. This may take a moment.
    </p>
    <button onclick="show(Math.random()>.45?'win':'lose')" style="margin-top:4px;padding:9px 20px;border-radius:10px;font-size:12px;color:#64748b;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);transition:all .2s" onmouseenter="this.style.color='#cbd5e1'" onmouseleave="this.style.color='#64748b'">⏩ Skip to result (demo)</button>
  </div>
</section>

<!-- ══════════════════════════════════════════════
     WIN
══════════════════════════════════════════════ -->
<section id="screen-win" class="screen">
  <!-- Glow -->
  <div style="position:absolute;top:20%;left:50%;transform:translateX(-50%);width:480px;height:480px;border-radius:50%;pointer-events:none;opacity:.18;filter:blur(100px);background:var(--emerald)"></div>
  <div class="anim-fade-scale" style="width:100%;max-width:460px;position:relative">
    <div class="glass-strong grad-border" style="border-radius:24px;padding:36px;text-align:center;overflow:hidden;position:relative">
      <div style="position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent,var(--emerald),transparent)"></div>
      <div style="width:72px;height:72px;border-radius:50%;margin:0 auto 20px;display:flex;align-items:center;justify-content:center;background:rgba(16,185,129,.12);border:2px solid rgba(16,185,129,.3)">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--emerald)" stroke-width="2"><path d="M8 12.5l3 3 5-6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="10"/></svg>
      </div>
      <h2 style="font-size:34px;font-weight:800;color:var(--emerald-light);margin-bottom:6px">You Won!</h2>
      <div style="font-size:28px;font-weight:700;color:var(--emerald);margin-bottom:22px">+0.30 SOL</div>
      <!-- Details -->
      <div style="border-radius:14px;padding:16px;margin-bottom:20px;text-align:left;background:rgba(255,255,255,.03);border:1px solid rgba(148,163,184,.08)">
        <div style="display:flex;justify-content:space-between;margin-bottom:10px"><span style="font-size:13px;color:#475569">Winning Chest</span><span style="font-size:13px;font-weight:700;color:var(--gold)">#2</span></div>
        <div style="height:1px;background:rgba(255,255,255,.05);margin-bottom:10px"></div>
        <div style="display:flex;justify-content:space-between;margin-bottom:10px"><span style="font-size:13px;color:#475569">Your Choice</span><span style="font-size:13px;font-weight:700;color:#fff">#2</span></div>
        <div style="height:1px;background:rgba(255,255,255,.05);margin-bottom:10px"></div>
        <div style="display:flex;justify-content:space-between;align-items:center"><span style="font-size:13px;color:#475569">Multiplier</span><span class="mult-badge">⚡ 3x</span></div>
      </div>
      <p style="font-size:11px;color:#334155;font-family:monospace;margin-bottom:20px">4sGjMW84sPCz7Q9nJ8…kx2e7vFp</p>
      <div style="display:flex;gap:10px">
        <button onclick="show('stake')" style="flex:1;padding:14px;border-radius:14px;font-size:15px;font-weight:700;color:#fff;background:linear-gradient(135deg,var(--purple-deep),var(--purple));box-shadow:0 0 24px rgba(139,92,246,.25);transition:transform .15s" onmouseenter="this.style.transform='scale(1.02)'" onmouseleave="this.style.transform=''">Play Again</button>
        <button onclick="show('hero')" style="padding:14px 20px;border-radius:14px;font-size:13px;font-weight:500;color:#64748b;border:1px solid rgba(255,255,255,.1);transition:all .2s" onmouseenter="this.style.color='#fff';this.style.borderColor='rgba(255,255,255,.2)'" onmouseleave="this.style.color='#64748b';this.style.borderColor='rgba(255,255,255,.1)'">Home</button>
      </div>
    </div>
  </div>
</section>

<!-- ══════════════════════════════════════════════
     LOSE
══════════════════════════════════════════════ -->
<section id="screen-lose" class="screen">
  <div class="anim-fade-scale" style="width:100%;max-width:460px">
    <div class="glass-strong grad-border" style="border-radius:24px;padding:36px;text-align:center;overflow:hidden;position:relative">
      <div style="position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent,var(--red),transparent)"></div>
      <div style="width:72px;height:72px;border-radius:50%;margin:0 auto 20px;display:flex;align-items:center;justify-content:center;background:rgba(239,68,68,.12);border:2px solid rgba(239,68,68,.3)">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="var(--red)" stroke-width="2"><path d="M15 9l-6 6M9 9l6 6" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="10"/></svg>
      </div>
      <h2 style="font-size:34px;font-weight:800;color:var(--red-light);margin-bottom:6px">You Lost</h2>
      <div style="font-size:28px;font-weight:700;color:var(--red);margin-bottom:22px">-0.10 SOL</div>
      <div style="border-radius:14px;padding:16px;margin-bottom:20px;text-align:left;background:rgba(255,255,255,.03);border:1px solid rgba(148,163,184,.08)">
        <div style="display:flex;justify-content:space-between;margin-bottom:10px"><span style="font-size:13px;color:#475569">Winning Chest</span><span style="font-size:13px;font-weight:700;color:var(--gold)">#3</span></div>
        <div style="height:1px;background:rgba(255,255,255,.05);margin-bottom:10px"></div>
        <div style="display:flex;justify-content:space-between;margin-bottom:10px"><span style="font-size:13px;color:#475569">Your Choice</span><span style="font-size:13px;font-weight:700;color:#fff">#1</span></div>
        <div style="height:1px;background:rgba(255,255,255,.05);margin-bottom:10px"></div>
        <div style="display:flex;justify-content:space-between;align-items:center"><span style="font-size:13px;color:#475569">Multiplier</span><span class="mult-badge">⚡ 3x</span></div>
      </div>
      <p style="font-size:11px;color:#334155;font-family:monospace;margin-bottom:20px">7hTkN2qM5b8xR1pVe…nY4wGdLs</p>
      <div style="display:flex;gap:10px">
        <button onclick="show('stake')" style="flex:1;padding:14px;border-radius:14px;font-size:15px;font-weight:700;color:#fff;background:linear-gradient(135deg,var(--purple-deep),var(--purple));box-shadow:0 0 24px rgba(139,92,246,.25);transition:transform .15s" onmouseenter="this.style.transform='scale(1.02)'" onmouseleave="this.style.transform=''">Play Again</button>
        <button onclick="show('hero')" style="padding:14px 20px;border-radius:14px;font-size:13px;font-weight:500;color:#64748b;border:1px solid rgba(255,255,255,.1);transition:all .2s" onmouseenter="this.style.color='#fff';this.style.borderColor='rgba(255,255,255,.2)'" onmouseleave="this.style.color='#64748b';this.style.borderColor='rgba(255,255,255,.1)'">Home</button>
      </div>
    </div>
  </div>
</section>

<script>
// ── State ──────────────────────────────────────────
let bet = 0.1, chests = 3, picked = null;
const BETS = [0.1, 0.3, 0.5, 0.7, 1.0];
const CHEST_OPTS = [2, 3, 4, 5];

// ── Particles ──────────────────────────────────────
(function(){
  const c = document.getElementById('ptcls');
  for(let i=0;i<20;i++){
    const p=document.createElement('span');p.className='particle';
    const s=2+Math.random()*3;
    p.style.cssText=`left:${Math.random()*100}%;bottom:-10px;width:${s}px;height:${s}px;animation-delay:${(Math.random()*6).toFixed(1)}s;animation-duration:${(6+Math.random()*6).toFixed(1)}s`;
    c.appendChild(p);
  }
})();

// ── Screen switch ──────────────────────────────────
const SCREENS = ['hero','stake','select','loading','win','lose'];
function show(id){
  if(typeof id==='object') return; // guard against event objects
  SCREENS.forEach(s=>{
    document.getElementById('screen-'+s).classList.remove('active');
    const nb=document.getElementById('nav-'+s);
    if(nb) nb.classList.remove('active-nav');
  });
  document.getElementById('screen-'+id).classList.add('active');
  const nb=document.getElementById('nav-'+id);
  if(nb) nb.classList.add('active-nav');
  const bg=document.getElementById('bgImg');
  bg.style.backgroundImage=(id==='select'||id==='loading')?"url('bg2.png')":"url('bg.png')";
  if(id==='stake') buildStake();
  if(id==='select'){buildSelect();updateStakeInfo();}
}

// ── Stake screen ───────────────────────────────────
function buildStake(){
  // Bet buttons
  const bg=document.getElementById('bet-grid'); bg.innerHTML='';
  BETS.forEach(a=>{
    const b=document.createElement('button');
    b.innerHTML=`${a}<span style="display:block;font-size:10px;opacity:.55;font-weight:400;margin-top:1px">SOL</span>`;
    b.style.cssText='padding:10px 0;border-radius:10px;text-align:center;font-weight:700;font-size:14px;transition:all .15s;font-family:inherit';
    styleToggle(b, a===bet);
    b.onclick=()=>{bet=a;buildStake()};
    bg.appendChild(b);
  });
  // Chest count buttons
  const cg=document.getElementById('chest-grid'); cg.innerHTML='';
  CHEST_OPTS.forEach(n=>{
    const b=document.createElement('button');
    b.textContent=n;
    b.style.cssText='flex:1;padding:8px 0;border-radius:10px;text-align:center;font-weight:700;font-size:15px;transition:all .15s;font-family:inherit';
    styleToggle(b, n===chests);
    b.onclick=()=>{chests=n;picked=null;buildStake()};
    cg.appendChild(b);
  });
  // Summary
  document.getElementById('payout-val').textContent=(bet*chests).toFixed(1)+' SOL';
  document.getElementById('mult-badge').textContent='⚡ '+chests+'x';
}

function styleToggle(btn, active){
  if(active){
    btn.style.background='linear-gradient(135deg,var(--purple-deep),var(--purple))';
    btn.style.color='#fff';
    btn.style.border='1px solid var(--purple)';
    btn.style.boxShadow='0 0 16px rgba(139,92,246,.3)';
  } else {
    btn.style.background='rgba(139,92,246,.1)';
    btn.style.color='var(--purple-light)';
    btn.style.border='1px solid rgba(139,92,246,.35)';
    btn.style.boxShadow='none';
  }
}

// ── Select screen ──────────────────────────────────
function updateStakeInfo(){
  document.getElementById('sel-bet').textContent=bet+' SOL';
  document.getElementById('sel-chests').textContent=chests+' chests';
  document.getElementById('sel-mult').textContent='⚡ '+chests+'x';
}

function buildSelect(){
  picked=null;
  const grid=document.getElementById('chest-select-grid');
  grid.style.gridTemplateColumns=`repeat(${Math.min(chests,5)},minmax(0,1fr))`;
  grid.innerHTML='';
  for(let i=0;i<chests;i++){
    const wrap=document.createElement('button');
    wrap.style.cssText='display:flex;flex-direction:column;align-items:center;background:none;border:none;cursor:pointer;padding:0;transition:transform .3s';
    wrap.innerHTML=`
      <div class="gring" style="position:absolute;width:120px;height:120px;border-radius:50%;background:radial-gradient(circle,rgba(139,92,246,.07) 0%,transparent 70%);transition:all .3s;pointer-events:none"></div>
      <div class="ccard" style="position:relative;z-index:1;width:148px;aspect-ratio:1;border-radius:18px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,.03);border:1px solid rgba(148,163,184,.08);box-shadow:0 4px 16px rgba(0,0,0,.2);transition:all .3s">
        <img src="chest.png" alt="Chest ${i+1}" style="width:100px;height:100px;object-fit:contain;transition:all .3s;filter:drop-shadow(0 0 8px rgba(245,166,35,.15))"/>
      </div>
      <div class="clbl" style="margin-top:10px;padding:5px 14px;border-radius:9999px;font-size:13px;font-weight:700;background:rgba(139,92,246,.1);color:var(--purple-light);border:1px solid rgba(139,92,246,.25);transition:all .3s">#${i+1}</div>`;
    const idx=i;
    wrap.onclick=()=>pickChest(idx,grid);
    wrap.onmouseenter=()=>{if(picked!==idx)wrap.style.transform='translateY(-4px)'};
    wrap.onmouseleave=()=>{if(picked!==idx)wrap.style.transform=''};
    grid.appendChild(wrap);
  }
  refreshConfirm();
}

function pickChest(idx,grid){
  picked=idx;
  [...grid.children].forEach((w,i)=>{
    const sel=i===idx;
    w.style.transform=sel?'translateY(-8px)':'';
    const g=w.querySelector('.gring'),c=w.querySelector('.ccard'),img=w.querySelector('img'),l=w.querySelector('.clbl');
    if(sel){
      g.style.background='radial-gradient(circle,rgba(245,166,35,.22) 0%,transparent 70%)';g.style.transform='scale(1.3)';
      c.style.background='linear-gradient(180deg,rgba(245,166,35,.1) 0%,rgba(245,166,35,.04) 100%)';
      c.style.border='2px solid rgba(245,166,35,.45)';c.style.boxShadow='0 0 28px rgba(245,166,35,.18),0 8px 28px rgba(0,0,0,.3)';
      img.style.filter='drop-shadow(0 0 18px rgba(245,166,35,.55))';img.style.transform='scale(1.07)';
      l.style.background='var(--gold)';l.style.color='#1a1a2e';l.style.border='1px solid var(--gold)';l.style.boxShadow='0 0 12px rgba(245,166,35,.3)';
    } else {
      g.style.background='radial-gradient(circle,rgba(139,92,246,.07) 0%,transparent 70%)';g.style.transform='';
      c.style.background='rgba(255,255,255,.03)';c.style.border='1px solid rgba(148,163,184,.08)';c.style.boxShadow='0 4px 16px rgba(0,0,0,.2)';
      img.style.filter='drop-shadow(0 0 8px rgba(245,166,35,.15))';img.style.transform='';
      l.style.background='rgba(139,92,246,.1)';l.style.color='var(--purple-light)';l.style.border='1px solid rgba(139,92,246,.25)';l.style.boxShadow='';
    }
  });
  refreshConfirm();
}

function refreshConfirm(){
  const b=document.getElementById('confirm-btn');
  if(picked!==null){
    b.disabled=false;b.style.opacity='1';b.style.cursor='pointer';
    b.style.background='linear-gradient(135deg,var(--purple-deep),var(--purple))';
    b.style.boxShadow='0 0 28px rgba(139,92,246,.28)';
    b.textContent='Confirm Chest #'+(picked+1);
  } else {
    b.disabled=true;b.style.opacity='.3';b.style.cursor='not-allowed';
    b.style.background='rgba(255,255,255,.05)';b.style.boxShadow='none';
    b.textContent='Select a Chest';
  }
}

// Init
buildStake();
</script>
</body>
</html>
